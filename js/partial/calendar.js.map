{"version":3,"file":"calendar.js","sources":["../../src/partial/calendar.js"],"sourcesContent":["/**\n * jQuery Equinox v1.0.0\n * Copyright 2014 Jordan Crown\n * Contributing Author: Cameron Rahman\n */\n\n/* global moment */\n\n(function ($) {\n  var defaultSettings = {\n    events: [],\n    detailedWidthBreakpoint: 550,\n    onEventClick: null,\n    onPreviousMonthStart: null,\n    onNextMonthStart: null,\n    onCurrentMonthStart: null,\n    onLoadStart: null,\n    onLoadEnd: null,\n  };\n\n  var defaultEventSettings = {\n    start: null,\n    end: null,\n    title: \"\",\n    url: \"\",\n    class: \"\",\n    color: \"\",\n    data: {},\n  };\n\n  var calendarContainer = null;\n\n  var methods = {\n    init: function (options) {\n      return this.each(function () {\n        var $this = $(this);\n        var data = $this.data(\"equinox\");\n\n        if (!data) {\n          var settings = $.extend({}, defaultSettings, options);\n\n          var currentDate = moment();\n\n          var validEvents = [];\n          for (var i = 0; i < settings.events.length; i++) {\n            settings.events[i] = $.extend(\n              {},\n              defaultEventSettings,\n              settings.events[i]\n            );\n\n            settings.events[i].start = moment(settings.events[i].start);\n            settings.events[i].end = moment(settings.events[i].end);\n\n            if (\n              !settings.events[i].start.isValid() ||\n              !settings.events[i].end.isValid()\n            )\n              continue;\n            if (\n              settings.events[i].start.valueOf() >\n              settings.events[i].end.valueOf()\n            )\n              continue;\n\n            settings.events[i].allDay = isAllDay(\n              settings.events[i].start,\n              settings.events[i].end\n            );\n            settings.events[i].daySpan = getDaySpan(\n              settings.events[i].start,\n              settings.events[i].end\n            );\n\n            validEvents.push(settings.events[i]);\n          }\n          settings.events.sort(function (a, b) {\n            return a.start.valueOf() - b.start.valueOf();\n          });\n\n          // segment events into start dates\n          var segmentedEvents = [];\n          for (var i = 0; i < settings.events.length; i++) {\n            settings.events[i].id = i;\n            var key = moment(settings.events[i].start)\n              .startOf(\"day\")\n              .format(\"UX\");\n            if (!(key in segmentedEvents)) {\n              segmentedEvents[key] = [];\n            }\n            segmentedEvents[key].push(settings.events[i]);\n          }\n\n          // save object data\n          data = {\n            target: $this,\n            settings: settings,\n            currentDate: currentDate,\n            segmentedEvents: segmentedEvents,\n            activeMonth: moment(currentDate).startOf(\"month\"),\n          };\n          $this.data(\"equinox\", data);\n\n          $this.addClass(\"equinox\");\n\n          // output initial calendar view\n          $this.equinox(\"refresh\");\n          $this.equinox(\"load\");\n\n          $(window).resize(function () {\n            $this.equinox(\"refresh\");\n          });\n\n          $this.on(\"click\", \".calendar-actions button.prev\", function (e) {\n            var data = $this.data(\"equinox\");\n            data.activeMonth.subtract(1, \"months\");\n            if (typeof data.settings.onPreviousMonthStart === typeof Function) {\n              data.settings.onPreviousMonthStart(e, data);\n            }\n            $this.equinox(\"load\");\n          });\n\n          $this.on(\"click\", \".calendar-actions button.next\", function (e) {\n            var data = $this.data(\"equinox\");\n            data.activeMonth.add(1, \"months\");\n            if (typeof data.settings.onNextMonthStart === typeof Function) {\n              data.settings.onNextMonthStart(e, data);\n            }\n            $this.equinox(\"load\");\n          });\n\n          $this.on(\"click\", \".calendar-actions button.today\", function (e) {\n            var data = $this.data(\"equinox\");\n            var currentMonth = moment().startOf(\"month\");\n            if (typeof data.settings.onCurrentMonthStart === typeof Function) {\n              data.settings.onCurrentMonthStart(e, data);\n            }\n            if (data.activeMonth.startOf(\"month\").diff(currentMonth) !== 0) {\n              data.activeMonth = currentMonth;\n              $this.equinox(\"load\");\n            }\n          });\n\n          $this.on(\"click\", \"a.event\", function (e) {\n            var data = $this.data(\"equinox\");\n            if (typeof data.settings.onEventClick === typeof Function) {\n              var eventObject = data.settings.events[$(this).data(\"event-id\")];\n              var eventData = $.extend(\n                {\n                  start: eventObject.start,\n                  end: eventObject.end,\n                  title: eventObject.title,\n                  url: eventObject.url,\n                  class: eventObject.class,\n                },\n                eventObject.data\n              );\n              data.settings.onEventClick(e, eventData);\n            }\n          });\n        }\n      });\n    },\n    load: function () {\n      return this.each(function () {\n        var $this = $(this);\n        var data = $this.data(\"equinox\");\n\n        if (typeof data.settings.onLoadStart === typeof Function) {\n          data.settings.onLoadStart(data);\n        }\n\n        var activeMonth = data.activeMonth;\n        var calendar = getMonthHtml(activeMonth, data.segmentedEvents);\n\n        if (typeof data.settings.onLoadEnd === typeof Function) {\n          data.settings.onLoadEnd(data);\n        }\n\n        $this.html(calendar);\n      });\n    },\n    refresh: function () {\n      return this.each(function () {\n        var $this = $(this);\n        var data = $this.data(\"equinox\");\n\n        if ($this.width() < data.settings.detailedWidthBreakpoint) {\n          $this.removeClass(\"detailed\");\n        } else {\n          $this.addClass(\"detailed\");\n        }\n      });\n    },\n  };\n\n  $.fn.equinox = function (method) {\n    if (methods[method]) {\n      return methods[method].apply(\n        this,\n        Array.prototype.slice.call(arguments, 1)\n      );\n    } else if (typeof method === \"object\" || !method) {\n      return methods.init.apply(this, arguments);\n    } else {\n      $.error(\"Method \" + method + \" does not exist on jQuery.equinox\");\n    }\n  };\n\n  var getMonthHtml = function (month, events) {\n    var monthHtml = $('<div class=\"calendar\"></div>');\n\n    var header = $('<div class=\"calendar-header\"></div>');\n    header.append('<div class=\"calendar-actions w-25\"></div>');\n    var prevBtn = $(\n      '<button type=\"button\" class=\"prev\" title=\"Previous\"><</button>'\n    );\n    $(\".calendar-actions\", header)\n      .append('<button type=\"button\" class=\"today\">Today</button>')\n      .append(prevBtn)\n      .append('<button type=\"button\" class=\"next\" title=\"Next\">></button>');\n    header.append(\n      '<div class=\"month-label w-50\">' + month.format(\"MMMM YYYY\") + \"</div>\"\n    );\n    header.append('<div class=\"calendar-display w-25\"></div>');\n    monthHtml.append(header);\n\n    var weeks = $('<div class=\"month-weeks\"></div>');\n\n    var weekHeader = $(\n      '<div class=\"week week-header\"><div class=\"days-container\"></div></div>'\n    );\n    for (var i = 0; i < 7; i++) {\n      $(\".days-container\", weekHeader).append(\n        '<div class=\"day ' +\n          moment().day(i).format(\"dddd\").toLowerCase() +\n          '\">' +\n          moment().day(i).format(\"dddd\") +\n          \"</div>\"\n      );\n    }\n    weeks.append(weekHeader);\n\n    var date = moment(month).startOf(\"month\").startOf(\"week\");\n\n    // build initial leftovers array from previous month\n    var leftovers = [];\n    for (var i in events) {\n      if (parseInt(i.substr(1)) >= date.unix()) break;\n      for (var j = 0; j < events[i].length; j++) {\n        if (events[i][j].end.valueOf() > date.valueOf()) {\n          events[i][j].daysLeft =\n            getDaySpan(date, events[i][j].end) -\n            (isMidnight(events[i][j].end) ? 1 : 0);\n          leftovers.push(events[i][j]);\n        }\n      }\n    }\n\n    var endOfMonthReached = false;\n    var daysInMonth = month.daysInMonth();\n    var currentDate = moment();\n    for (i = 0; !endOfMonthReached; i++) {\n      var week = $('<div class=\"week week-' + i + '\"></div>');\n\n      var weekEventSlots = [[]];\n      var weekDate = moment(date);\n      for (var j = 0; j < 7; j++) {\n        weekDate.day(j);\n\n        // add leftovers from previous week\n        if (j === 0) {\n          for (var k = 0; k < leftovers.length; k++) {\n            var slot = 0;\n            while (weekEventSlots[slot][j]) {\n              slot++;\n              if (!(slot in weekEventSlots)) weekEventSlots[slot] = [];\n            }\n            weekEventSlots[slot][j] = leftovers[k];\n            for (var l = j + 1; l < leftovers[k].daysLeft + j && l < 7; l++) {\n              weekEventSlots[slot][l] = \"reserved\";\n            }\n          }\n        }\n\n        var dateEvents =\n          weekDate.format(\"UX\") in events ? events[weekDate.format(\"UX\")] : [];\n        for (var k = 0; k < dateEvents.length; k++) {\n          if (dateEvents[k].daySpan < 2) continue;\n          var slot = 0;\n          while (weekEventSlots[slot][j]) {\n            slot++;\n            if (!(slot in weekEventSlots)) weekEventSlots[slot] = [];\n          }\n          dateEvents[k].daysLeft =\n            dateEvents[k].daySpan - (isMidnight(dateEvents[k].end) ? 1 : 0);\n          weekEventSlots[slot][j] = dateEvents[k];\n          for (var l = j + 1; l < dateEvents[k].daysLeft + j && l < 7; l++) {\n            weekEventSlots[slot][l] = \"reserved\";\n          }\n        }\n      }\n\n      leftovers = [];\n      week.append('<ul class=\"week-events\"></ul>');\n      for (var j = 0; j < weekEventSlots.length; j++) {\n        var slot = $('<li class=\"slot\"><ul></ul></li>');\n        for (var k = 0; k < 7; k++) {\n          if (weekEventSlots[j][k] === \"reserved\") {\n            continue;\n          } else if (!weekEventSlots[j][k]) {\n            $(\"ul\", slot).append('<li class=\"event-container\"></li>');\n          } else {\n            var eventContainer = $(\n              '<li class=\"event-container span-' +\n                Math.min(weekEventSlots[j][k].daysLeft, 7 - k) +\n                '\"></li>'\n            );\n            if (\n              weekEventSlots[j][k].daySpan -\n                (isMidnight(weekEventSlots[j][k].end) ? 1 : 0) >\n              weekEventSlots[j][k].daysLeft\n            )\n              eventContainer.addClass(\"continuation\");\n            if (weekEventSlots[j][k].daysLeft > 7 - k)\n              eventContainer.addClass(\"continued\");\n            eventContainer.append(getEventHtml(weekEventSlots[j][k]));\n            $(\"ul\", slot).append(eventContainer);\n            if (weekEventSlots[j][k].daysLeft > 7 - k) {\n              weekEventSlots[j][k].daysLeft -= 7 - k;\n              leftovers.push(weekEventSlots[j][k]);\n            } else {\n              delete weekEventSlots[j][k].daysLeft;\n            }\n          }\n        }\n        $(\".week-events\", week).append(slot);\n      }\n\n      week.append('<div class=\"days-container\"></div>');\n      for (var j = 0; j < 7; j++) {\n        date.day(j);\n\n        var reservedSlots = [];\n        for (var k = 0; k < weekEventSlots.length; k++) {\n          if (weekEventSlots[k][j]) {\n            reservedSlots.push(k);\n          }\n        }\n\n        var dateEvents =\n          date.format(\"UX\") in events ? events[date.format(\"UX\")] : [];\n\n        $(\".days-container\", week).append(\n          getDateHtml(date, dateEvents, reservedSlots, month, currentDate)\n        );\n\n        if (date.month() === month.month() && date.date() === daysInMonth) {\n          endOfMonthReached = true;\n        }\n      }\n\n      weeks.append(week);\n      date.add(1, \"days\"); // increment to next week\n    }\n\n    monthHtml.append(weeks);\n    \n    const hasToday = monthHtml.find(\".current-date\").length > 0;\n    prevBtn.attr(\"disabled\", hasToday);\n\n    return monthHtml;\n  };\n\n  var getDateHtml = function (\n    date,\n    events,\n    reservedSlots,\n    activeMonth,\n    currentDate\n  ) {\n    var dateClasses = [\n      \"date\",\n      \"date-\" + date.date(),\n      \"day\",\n      moment(date).format(\"dddd\").toLowerCase(),\n    ];\n    if (date.month() !== activeMonth.month()) {\n      dateClasses.push(\"outside-month\");\n    }\n    if (\n      moment(date).startOf(\"day\").valueOf() ===\n      moment(currentDate).startOf(\"day\").valueOf()\n    ) {\n      dateClasses.push(\"current-date\");\n    }\n    if (events.length || reservedSlots.length) {\n      dateClasses.push(\"has-events\");\n    }\n\n    var dateHtml = $('<div class=\"' + dateClasses.join(\" \") + '\"></div>');\n    dateHtml.append(\n      '<div class=\"date-label\">' +\n        (date.date() === 1 ? date.format(\"MMM \") : \"\") +\n        date.date() +\n        \"</div>\"\n    );\n    dateHtml.append('<ul class=\"date-events\"></ul>');\n\n    var slot = 0;\n    var reservedSlot = reservedSlots.shift();\n    for (var i = 0; i < events.length; i++) {\n      if (slot === reservedSlot) {\n        $(\".date-events\", dateHtml).append(\n          '<li class=\"event-container placeholder\"></li>'\n        );\n        reservedSlot = reservedSlots.shift();\n        i--;\n      } else if (events[i].daySpan >= 2) {\n        continue;\n      } else {\n        var eventContainer = $('<li class=\"event-container\"></li>');\n        eventContainer.append(getEventHtml(events[i]));\n        $(\".date-events\", dateHtml).append(eventContainer);\n      }\n      slot++;\n    }\n\n    return dateHtml;\n  };\n\n  var getEventHtml = function (event) {\n    var eventHtml = $(\n      '<a class=\"event ' +\n        event.class +\n        '\" href=\"' +\n        event.url +\n        '\" ' +\n        (event.color != \"\"\n          ? 'style=\"border-color: ' + event.color + ';\"'\n          : \"\") +\n        \"></a>\"\n    );\n    eventHtml.data(\"event-id\", event.id);\n    eventHtml.append(\n      '<span class=\"start-time\">' +\n        event.start.format(event.start.minutes() === 0 ? \"ha\" : \"h:mma\") +\n        \"</span>\"\n    );\n    eventHtml.append('<span class=\"title\">' + event.title + \"</span>\");\n    return eventHtml;\n  };\n\n  var isAllDay = function (start, end) {\n    return end.diff(start) % moment.duration(1, \"days\").asMilliseconds() === 0;\n  };\n\n  var isMidnight = function (time) {\n    return time.format(\"HH:mm:ss.SSS\") === \"00:00:00.000\";\n  };\n\n  var getDaySpan = function (start, end) {\n    var startDate = moment(start).startOf(\"day\");\n    var endDate = moment(end).startOf(\"day\");\n    return (\n      endDate.diff(startDate) / moment.duration(1, \"days\").asMilliseconds() + 1\n    );\n  };\n})(jQuery);\n"],"names":["$","defaultSettings","events","detailedWidthBreakpoint","onEventClick","onPreviousMonthStart","onNextMonthStart","onCurrentMonthStart","onLoadStart","onLoadEnd","defaultEventSettings","start","end","title","url","class","color","data","methods","init","options","each","$this","settings","extend","currentDate","moment","validEvents","i","length","isValid","valueOf","allDay","isAllDay","daySpan","getDaySpan","push","sort","a","b","segmentedEvents","id","key","startOf","format","target","activeMonth","addClass","equinox","window","resize","on","e","subtract","Function","add","currentMonth","diff","eventObject","eventData","load","calendar","getMonthHtml","html","refresh","width","removeClass","fn","method","apply","Array","prototype","slice","call","arguments","error","month","monthHtml","header","append","prevBtn","weeks","weekHeader","day","toLowerCase","date","leftovers","parseInt","substr","unix","j","daysLeft","isMidnight","endOfMonthReached","daysInMonth","week","weekEventSlots","weekDate","k","slot","l","dateEvents","eventContainer","Math","min","getEventHtml","reservedSlots","getDateHtml","hasToday","find","attr","dateClasses","dateHtml","join","reservedSlot","shift","event","eventHtml","minutes","duration","asMilliseconds","time","startDate","endDate","jQuery"],"mappings":"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"}