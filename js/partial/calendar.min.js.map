{"version":3,"file":"calendar.min.js","sources":["../../src/partial/calendar.js"],"sourcesContent":["/**\n * jQuery Equinox v1.0.0\n * Copyright 2014 Jordan Crown\n * Contributing Author: Cameron Rahman\n */\n\n/* global moment */\n\n(function ($) {\n  var defaultSettings = {\n    events: [],\n    detailedWidthBreakpoint: 550,\n    onEventClick: null,\n    onPreviousMonthStart: null,\n    onNextMonthStart: null,\n    onCurrentMonthStart: null,\n    onLoadStart: null,\n    onLoadEnd: null,\n  };\n\n  var defaultEventSettings = {\n    start: null,\n    end: null,\n    title: \"\",\n    url: \"\",\n    class: \"\",\n    color: \"\",\n    data: {},\n  };\n\n  var calendarContainer = null;\n\n  var methods = {\n    init: function (options) {\n      return this.each(function () {\n        var $this = $(this);\n        var data = $this.data(\"equinox\");\n\n        if (!data) {\n          var settings = $.extend({}, defaultSettings, options);\n\n          var currentDate = moment();\n\n          var validEvents = [];\n          for (var i = 0; i < settings.events.length; i++) {\n            settings.events[i] = $.extend(\n              {},\n              defaultEventSettings,\n              settings.events[i]\n            );\n\n            settings.events[i].start = moment(settings.events[i].start);\n            settings.events[i].end = moment(settings.events[i].end);\n\n            if (\n              !settings.events[i].start.isValid() ||\n              !settings.events[i].end.isValid()\n            )\n              continue;\n            if (\n              settings.events[i].start.valueOf() >\n              settings.events[i].end.valueOf()\n            )\n              continue;\n\n            settings.events[i].allDay = isAllDay(\n              settings.events[i].start,\n              settings.events[i].end\n            );\n            settings.events[i].daySpan = getDaySpan(\n              settings.events[i].start,\n              settings.events[i].end\n            );\n\n            validEvents.push(settings.events[i]);\n          }\n          settings.events.sort(function (a, b) {\n            return a.start.valueOf() - b.start.valueOf();\n          });\n\n          // segment events into start dates\n          var segmentedEvents = [];\n          for (var i = 0; i < settings.events.length; i++) {\n            settings.events[i].id = i;\n            var key = moment(settings.events[i].start)\n              .startOf(\"day\")\n              .format(\"UX\");\n            if (!(key in segmentedEvents)) {\n              segmentedEvents[key] = [];\n            }\n            segmentedEvents[key].push(settings.events[i]);\n          }\n\n          // save object data\n          data = {\n            target: $this,\n            settings: settings,\n            currentDate: currentDate,\n            segmentedEvents: segmentedEvents,\n            activeMonth: moment(currentDate).startOf(\"month\"),\n          };\n          $this.data(\"equinox\", data);\n\n          $this.addClass(\"equinox\");\n\n          // output initial calendar view\n          $this.equinox(\"refresh\");\n          $this.equinox(\"load\");\n\n          $(window).resize(function () {\n            $this.equinox(\"refresh\");\n          });\n\n          $this.on(\"click\", \".calendar-actions button.prev\", function (e) {\n            var data = $this.data(\"equinox\");\n            data.activeMonth.subtract(1, \"months\");\n            if (typeof data.settings.onPreviousMonthStart === typeof Function) {\n              data.settings.onPreviousMonthStart(e, data);\n            }\n            $this.equinox(\"load\");\n          });\n\n          $this.on(\"click\", \".calendar-actions button.next\", function (e) {\n            var data = $this.data(\"equinox\");\n            data.activeMonth.add(1, \"months\");\n            if (typeof data.settings.onNextMonthStart === typeof Function) {\n              data.settings.onNextMonthStart(e, data);\n            }\n            $this.equinox(\"load\");\n          });\n\n          $this.on(\"click\", \".calendar-actions button.today\", function (e) {\n            var data = $this.data(\"equinox\");\n            var currentMonth = moment().startOf(\"month\");\n            if (typeof data.settings.onCurrentMonthStart === typeof Function) {\n              data.settings.onCurrentMonthStart(e, data);\n            }\n            if (data.activeMonth.startOf(\"month\").diff(currentMonth) !== 0) {\n              data.activeMonth = currentMonth;\n              $this.equinox(\"load\");\n            }\n          });\n\n          $this.on(\"click\", \"a.event\", function (e) {\n            var data = $this.data(\"equinox\");\n            if (typeof data.settings.onEventClick === typeof Function) {\n              var eventObject = data.settings.events[$(this).data(\"event-id\")];\n              var eventData = $.extend(\n                {\n                  start: eventObject.start,\n                  end: eventObject.end,\n                  title: eventObject.title,\n                  url: eventObject.url,\n                  class: eventObject.class,\n                },\n                eventObject.data\n              );\n              data.settings.onEventClick(e, eventData);\n            }\n          });\n        }\n      });\n    },\n    load: function () {\n      return this.each(function () {\n        var $this = $(this);\n        var data = $this.data(\"equinox\");\n\n        if (typeof data.settings.onLoadStart === typeof Function) {\n          data.settings.onLoadStart(data);\n        }\n\n        var activeMonth = data.activeMonth;\n        var calendar = getMonthHtml(activeMonth, data.segmentedEvents);\n\n        if (typeof data.settings.onLoadEnd === typeof Function) {\n          data.settings.onLoadEnd(data);\n        }\n\n        $this.html(calendar);\n      });\n    },\n    refresh: function () {\n      return this.each(function () {\n        var $this = $(this);\n        var data = $this.data(\"equinox\");\n\n        if ($this.width() < data.settings.detailedWidthBreakpoint) {\n          $this.removeClass(\"detailed\");\n        } else {\n          $this.addClass(\"detailed\");\n        }\n      });\n    },\n  };\n\n  $.fn.equinox = function (method) {\n    if (methods[method]) {\n      return methods[method].apply(\n        this,\n        Array.prototype.slice.call(arguments, 1)\n      );\n    } else if (typeof method === \"object\" || !method) {\n      return methods.init.apply(this, arguments);\n    } else {\n      $.error(\"Method \" + method + \" does not exist on jQuery.equinox\");\n    }\n  };\n\n  var getMonthHtml = function (month, events) {\n    var monthHtml = $('<div class=\"calendar\"></div>');\n\n    var header = $('<div class=\"calendar-header\"></div>');\n    header.append('<div class=\"calendar-actions w-25\"></div>');\n    var prevBtn = $(\n      '<button type=\"button\" class=\"prev\" title=\"Previous\"><</button>'\n    );\n    $(\".calendar-actions\", header)\n      .append('<button type=\"button\" class=\"today\">Today</button>')\n      .append(prevBtn)\n      .append('<button type=\"button\" class=\"next\" title=\"Next\">></button>');\n    header.append(\n      '<div class=\"month-label w-50\">' + month.format(\"MMMM YYYY\") + \"</div>\"\n    );\n    header.append('<div class=\"calendar-display w-25\"></div>');\n    monthHtml.append(header);\n\n    var weeks = $('<div class=\"month-weeks\"></div>');\n\n    var weekHeader = $(\n      '<div class=\"week week-header\"><div class=\"days-container\"></div></div>'\n    );\n    for (var i = 0; i < 7; i++) {\n      $(\".days-container\", weekHeader).append(\n        '<div class=\"day ' +\n          moment().day(i).format(\"dddd\").toLowerCase() +\n          '\">' +\n          moment().day(i).format(\"dddd\") +\n          \"</div>\"\n      );\n    }\n    weeks.append(weekHeader);\n\n    var date = moment(month).startOf(\"month\").startOf(\"week\");\n\n    // build initial leftovers array from previous month\n    var leftovers = [];\n    for (var i in events) {\n      if (parseInt(i.substr(1)) >= date.unix()) break;\n      for (var j = 0; j < events[i].length; j++) {\n        if (events[i][j].end.valueOf() > date.valueOf()) {\n          events[i][j].daysLeft =\n            getDaySpan(date, events[i][j].end) -\n            (isMidnight(events[i][j].end) ? 1 : 0);\n          leftovers.push(events[i][j]);\n        }\n      }\n    }\n\n    var endOfMonthReached = false;\n    var daysInMonth = month.daysInMonth();\n    var currentDate = moment();\n    for (i = 0; !endOfMonthReached; i++) {\n      var week = $('<div class=\"week week-' + i + '\"></div>');\n\n      var weekEventSlots = [[]];\n      var weekDate = moment(date);\n      for (var j = 0; j < 7; j++) {\n        weekDate.day(j);\n\n        // add leftovers from previous week\n        if (j === 0) {\n          for (var k = 0; k < leftovers.length; k++) {\n            var slot = 0;\n            while (weekEventSlots[slot][j]) {\n              slot++;\n              if (!(slot in weekEventSlots)) weekEventSlots[slot] = [];\n            }\n            weekEventSlots[slot][j] = leftovers[k];\n            for (var l = j + 1; l < leftovers[k].daysLeft + j && l < 7; l++) {\n              weekEventSlots[slot][l] = \"reserved\";\n            }\n          }\n        }\n\n        var dateEvents =\n          weekDate.format(\"UX\") in events ? events[weekDate.format(\"UX\")] : [];\n        for (var k = 0; k < dateEvents.length; k++) {\n          if (dateEvents[k].daySpan < 2) continue;\n          var slot = 0;\n          while (weekEventSlots[slot][j]) {\n            slot++;\n            if (!(slot in weekEventSlots)) weekEventSlots[slot] = [];\n          }\n          dateEvents[k].daysLeft =\n            dateEvents[k].daySpan - (isMidnight(dateEvents[k].end) ? 1 : 0);\n          weekEventSlots[slot][j] = dateEvents[k];\n          for (var l = j + 1; l < dateEvents[k].daysLeft + j && l < 7; l++) {\n            weekEventSlots[slot][l] = \"reserved\";\n          }\n        }\n      }\n\n      leftovers = [];\n      week.append('<ul class=\"week-events\"></ul>');\n      for (var j = 0; j < weekEventSlots.length; j++) {\n        var slot = $('<li class=\"slot\"><ul></ul></li>');\n        for (var k = 0; k < 7; k++) {\n          if (weekEventSlots[j][k] === \"reserved\") {\n            continue;\n          } else if (!weekEventSlots[j][k]) {\n            $(\"ul\", slot).append('<li class=\"event-container\"></li>');\n          } else {\n            var eventContainer = $(\n              '<li class=\"event-container span-' +\n                Math.min(weekEventSlots[j][k].daysLeft, 7 - k) +\n                '\"></li>'\n            );\n            if (\n              weekEventSlots[j][k].daySpan -\n                (isMidnight(weekEventSlots[j][k].end) ? 1 : 0) >\n              weekEventSlots[j][k].daysLeft\n            )\n              eventContainer.addClass(\"continuation\");\n            if (weekEventSlots[j][k].daysLeft > 7 - k)\n              eventContainer.addClass(\"continued\");\n            eventContainer.append(getEventHtml(weekEventSlots[j][k]));\n            $(\"ul\", slot).append(eventContainer);\n            if (weekEventSlots[j][k].daysLeft > 7 - k) {\n              weekEventSlots[j][k].daysLeft -= 7 - k;\n              leftovers.push(weekEventSlots[j][k]);\n            } else {\n              delete weekEventSlots[j][k].daysLeft;\n            }\n          }\n        }\n        $(\".week-events\", week).append(slot);\n      }\n\n      week.append('<div class=\"days-container\"></div>');\n      for (var j = 0; j < 7; j++) {\n        date.day(j);\n\n        var reservedSlots = [];\n        for (var k = 0; k < weekEventSlots.length; k++) {\n          if (weekEventSlots[k][j]) {\n            reservedSlots.push(k);\n          }\n        }\n\n        var dateEvents =\n          date.format(\"UX\") in events ? events[date.format(\"UX\")] : [];\n\n        $(\".days-container\", week).append(\n          getDateHtml(date, dateEvents, reservedSlots, month, currentDate)\n        );\n\n        if (date.month() === month.month() && date.date() === daysInMonth) {\n          endOfMonthReached = true;\n        }\n      }\n\n      weeks.append(week);\n      date.add(1, \"days\"); // increment to next week\n    }\n\n    monthHtml.append(weeks);\n    \n    const hasToday = monthHtml.find(\".current-date\").length > 0;\n    prevBtn.attr(\"disabled\", hasToday);\n\n    return monthHtml;\n  };\n\n  var getDateHtml = function (\n    date,\n    events,\n    reservedSlots,\n    activeMonth,\n    currentDate\n  ) {\n    var dateClasses = [\n      \"date\",\n      \"date-\" + date.date(),\n      \"day\",\n      moment(date).format(\"dddd\").toLowerCase(),\n    ];\n    if (date.month() !== activeMonth.month()) {\n      dateClasses.push(\"outside-month\");\n    }\n    if (\n      moment(date).startOf(\"day\").valueOf() ===\n      moment(currentDate).startOf(\"day\").valueOf()\n    ) {\n      dateClasses.push(\"current-date\");\n    }\n    if (events.length || reservedSlots.length) {\n      dateClasses.push(\"has-events\");\n    }\n\n    var dateHtml = $('<div class=\"' + dateClasses.join(\" \") + '\"></div>');\n    dateHtml.append(\n      '<div class=\"date-label\">' +\n        (date.date() === 1 ? date.format(\"MMM \") : \"\") +\n        date.date() +\n        \"</div>\"\n    );\n    dateHtml.append('<ul class=\"date-events\"></ul>');\n\n    var slot = 0;\n    var reservedSlot = reservedSlots.shift();\n    for (var i = 0; i < events.length; i++) {\n      if (slot === reservedSlot) {\n        $(\".date-events\", dateHtml).append(\n          '<li class=\"event-container placeholder\"></li>'\n        );\n        reservedSlot = reservedSlots.shift();\n        i--;\n      } else if (events[i].daySpan >= 2) {\n        continue;\n      } else {\n        var eventContainer = $('<li class=\"event-container\"></li>');\n        eventContainer.append(getEventHtml(events[i]));\n        $(\".date-events\", dateHtml).append(eventContainer);\n      }\n      slot++;\n    }\n\n    return dateHtml;\n  };\n\n  var getEventHtml = function (event) {\n    var eventHtml = $(\n      '<a class=\"event ' +\n        event.class +\n        '\" href=\"' +\n        event.url +\n        '\" ' +\n        (event.color != \"\"\n          ? 'style=\"border-color: ' + event.color + ';\"'\n          : \"\") +\n        \"></a>\"\n    );\n    eventHtml.data(\"event-id\", event.id);\n    eventHtml.append(\n      '<span class=\"start-time\">' +\n        event.start.format(event.start.minutes() === 0 ? \"ha\" : \"h:mma\") +\n        \"</span>\"\n    );\n    eventHtml.append('<span class=\"title\">' + event.title + \"</span>\");\n    return eventHtml;\n  };\n\n  var isAllDay = function (start, end) {\n    return end.diff(start) % moment.duration(1, \"days\").asMilliseconds() === 0;\n  };\n\n  var isMidnight = function (time) {\n    return time.format(\"HH:mm:ss.SSS\") === \"00:00:00.000\";\n  };\n\n  var getDaySpan = function (start, end) {\n    var startDate = moment(start).startOf(\"day\");\n    var endDate = moment(end).startOf(\"day\");\n    return (\n      endDate.diff(startDate) / moment.duration(1, \"days\").asMilliseconds() + 1\n    );\n  };\n})(jQuery);\n"],"names":["$","defaultSettings","events","detailedWidthBreakpoint","onEventClick","onPreviousMonthStart","onNextMonthStart","onCurrentMonthStart","onLoadStart","onLoadEnd","defaultEventSettings","start","end","title","url","class","color","data","methods","init","options","this","each","$this","settings","extend","currentDate","moment","validEvents","i","length","isValid","valueOf","allDay","isAllDay","daySpan","getDaySpan","push","sort","a","b","segmentedEvents","id","key","startOf","format","target","activeMonth","addClass","equinox","window","resize","on","e","subtract","Function","add","currentMonth","diff","eventObject","eventData","load","calendar","getMonthHtml","html","refresh","width","removeClass","fn","method","apply","Array","prototype","slice","call","arguments","error","month","monthHtml","header","append","prevBtn","weeks","weekHeader","day","toLowerCase","date","leftovers","parseInt","substr","unix","j","daysLeft","isMidnight","endOfMonthReached","daysInMonth","week","weekEventSlots","weekDate","k","slot","l","dateEvents","eventContainer","Math","min","getEventHtml","reservedSlots","getDateHtml","hasToday","find","attr","dateClasses","dateHtml","join","reservedSlot","shift","event","eventHtml","minutes","duration","asMilliseconds","time","startDate","jQuery"],"mappings":"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"}