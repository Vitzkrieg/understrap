!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";!function(t){var e={events:[],detailedWidthBreakpoint:550,onEventClick:null,onPreviousMonthStart:null,onNextMonthStart:null,onCurrentMonthStart:null,onLoadStart:null,onLoadEnd:null},n={start:null,end:null,title:"",url:"",class:"",color:"",data:{}},a={init:function(a){return this.each((function(){var s=t(this),o=s.data("equinox");if(!o){for(var d=t.extend({},e,a),r=moment(),v=[],u=0;u<d.events.length;u++)d.events[u]=t.extend({},n,d.events[u]),d.events[u].start=moment(d.events[u].start),d.events[u].end=moment(d.events[u].end),d.events[u].start.isValid()&&d.events[u].end.isValid()&&(d.events[u].start.valueOf()>d.events[u].end.valueOf()||(d.events[u].allDay=i(d.events[u].start,d.events[u].end),d.events[u].daySpan=l(d.events[u].start,d.events[u].end),v.push(d.events[u])));d.events.sort((function(t,e){return t.start.valueOf()-e.start.valueOf()}));var f=[];for(u=0;u<d.events.length;u++){d.events[u].id=u;var c=moment(d.events[u].start).startOf("day").format("UX");c in f||(f[c]=[]),f[c].push(d.events[u])}o={target:s,settings:d,currentDate:r,segmentedEvents:f,activeMonth:moment(r).startOf("month")},s.data("equinox",o),s.addClass("equinox"),s.equinox("refresh"),s.equinox("load"),t(window).resize((function(){s.equinox("refresh")})),s.on("click",".calendar-actions button.prev",(function(t){var e=s.data("equinox");e.activeMonth.subtract(1,"months"),typeof e.settings.onPreviousMonthStart==typeof Function&&e.settings.onPreviousMonthStart(t,e),s.equinox("load")})),s.on("click",".calendar-actions button.next",(function(t){var e=s.data("equinox");e.activeMonth.add(1,"months"),typeof e.settings.onNextMonthStart==typeof Function&&e.settings.onNextMonthStart(t,e),s.equinox("load")})),s.on("click",".calendar-actions button.today",(function(t){var e=s.data("equinox"),n=moment().startOf("month");typeof e.settings.onCurrentMonthStart==typeof Function&&e.settings.onCurrentMonthStart(t,e),0!==e.activeMonth.startOf("month").diff(n)&&(e.activeMonth=n,s.equinox("load"))})),s.on("click","a.event",(function(e){var n=s.data("equinox");if(typeof n.settings.onEventClick==typeof Function){var a=n.settings.events[t(this).data("event-id")],o=t.extend({start:a.start,end:a.end,title:a.title,url:a.url,class:a.class},a.data);n.settings.onEventClick(e,o)}}))}}))},load:function(){return this.each((function(){var e=t(this),n=e.data("equinox");typeof n.settings.onLoadStart==typeof Function&&n.settings.onLoadStart(n);var a=n.activeMonth,o=s(a,n.segmentedEvents);typeof n.settings.onLoadEnd==typeof Function&&n.settings.onLoadEnd(n),e.html(o)}))},refresh:function(){return this.each((function(){var e=t(this),n=e.data("equinox");e.width()<n.settings.detailedWidthBreakpoint?e.removeClass("detailed"):e.addClass("detailed")}))}};t.fn.equinox=function(e){return a[e]?a[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.equinox"):a.init.apply(this,arguments)};var s=function(e,n){var a=t('<div class="calendar"></div>'),s=t('<div class="calendar-header"></div>');s.append('<div class="calendar-actions w-25"></div>');var i=t('<button type="button" class="prev" title="Previous"><</button>');t(".calendar-actions",s).append('<button type="button" class="today">Today</button>').append(i).append('<button type="button" class="next" title="Next">></button>'),s.append('<div class="month-label w-50">'+e.format("MMMM YYYY")+"</div>"),s.append('<div class="calendar-display w-25"></div>'),a.append(s);for(var v=t('<div class="month-weeks"></div>'),u=t('<div class="week week-header"><div class="days-container"></div></div>'),f=0;f<7;f++)t(".days-container",u).append('<div class="day '+moment().day(f).format("dddd").toLowerCase()+'">'+moment().day(f).format("dddd")+"</div>");v.append(u);var c=moment(e).startOf("month").startOf("week"),p=[];for(var f in n){if(parseInt(f.substr(1))>=c.unix())break;for(var h=0;h<n[f].length;h++)n[f][h].end.valueOf()>c.valueOf()&&(n[f][h].daysLeft=l(c,n[f][h].end)-(r(n[f][h].end)?1:0),p.push(n[f][h]))}var m=!1,y=e.daysInMonth(),g=moment();for(f=0;!m;f++){var x=t('<div class="week week-'+f+'"></div>'),M=[[]],b=moment(c);for(h=0;h<7;h++){if(b.day(h),0===h)for(var S=0;S<p.length;S++){for(var k=0;M[k][h];)++k in M||(M[k]=[]);M[k][h]=p[S];for(var L=h+1;L<p[S].daysLeft+h&&L<7;L++)M[k][L]="reserved"}var O=b.format("UX")in n?n[b.format("UX")]:[];for(S=0;S<O.length;S++)if(!(O[S].daySpan<2)){for(k=0;M[k][h];)++k in M||(M[k]=[]);O[S].daysLeft=O[S].daySpan-(r(O[S].end)?1:0),M[k][h]=O[S];for(L=h+1;L<O[S].daysLeft+h&&L<7;L++)M[k][L]="reserved"}}p=[],x.append('<ul class="week-events"></ul>');for(h=0;h<M.length;h++){for(k=t('<li class="slot"><ul></ul></li>'),S=0;S<7;S++)if("reserved"!==M[h][S])if(M[h][S]){var q=t('<li class="event-container span-'+Math.min(M[h][S].daysLeft,7-S)+'"></li>');M[h][S].daySpan-(r(M[h][S].end)?1:0)>M[h][S].daysLeft&&q.addClass("continuation"),M[h][S].daysLeft>7-S&&q.addClass("continued"),q.append(d(M[h][S])),t("ul",k).append(q),M[h][S].daysLeft>7-S?(M[h][S].daysLeft-=7-S,p.push(M[h][S])):delete M[h][S].daysLeft}else t("ul",k).append('<li class="event-container"></li>');t(".week-events",x).append(k)}x.append('<div class="days-container"></div>');for(h=0;h<7;h++){c.day(h);var w=[];for(S=0;S<M.length;S++)M[S][h]&&w.push(S);O=c.format("UX")in n?n[c.format("UX")]:[];t(".days-container",x).append(o(c,O,w,e,g)),c.month()===e.month()&&c.date()===y&&(m=!0)}v.append(x),c.add(1,"days")}a.append(v);const C=a.find(".current-date").length>0;return i.attr("disabled",C),a},o=function(e,n,a,s,o){var i=["date","date-"+e.date(),"day",moment(e).format("dddd").toLowerCase()];e.month()!==s.month()&&i.push("outside-month"),moment(e).startOf("day").valueOf()===moment(o).startOf("day").valueOf()&&i.push("current-date"),(n.length||a.length)&&i.push("has-events");var r=t('<div class="'+i.join(" ")+'"></div>');r.append('<div class="date-label">'+(1===e.date()?e.format("MMM "):"")+e.date()+"</div>"),r.append('<ul class="date-events"></ul>');for(var l=0,v=a.shift(),u=0;u<n.length;u++){if(l===v)t(".date-events",r).append('<li class="event-container placeholder"></li>'),v=a.shift(),u--;else{if(n[u].daySpan>=2)continue;var f=t('<li class="event-container"></li>');f.append(d(n[u])),t(".date-events",r).append(f)}l++}return r},d=function(e){var n=t('<a class="event '+e.class+'" href="'+e.url+'" '+(""!=e.color?'style="border-color: '+e.color+';"':"")+"></a>");return n.data("event-id",e.id),n.append('<span class="start-time">'+e.start.format(0===e.start.minutes()?"ha":"h:mma")+"</span>"),n.append('<span class="title">'+e.title+"</span>"),n},i=function(t,e){return e.diff(t)%moment.duration(1,"days").asMilliseconds()==0},r=function(t){return"00:00:00.000"===t.format("HH:mm:ss.SSS")},l=function(t,e){var n=moment(t).startOf("day");return moment(e).startOf("day").diff(n)/moment.duration(1,"days").asMilliseconds()+1}}(jQuery)}));
//# sourceMappingURL=calendar.min.js.map
